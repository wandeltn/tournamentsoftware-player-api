{"version":3,"sources":["../src/lib/api.ts"],"sourcesContent":["import { PlayerDetails } from '$/types/index';\nimport axios, {\n  AxiosResponse,\n  AxiosRequestConfig,\n  RawAxiosRequestHeaders,\n} from 'axios';\nimport * as cheerio from 'cheerio';\n\nfunction getSearchResults(query: string): Promise<string | never[]> {\n  const client = axios.create({\n    baseURL: 'https://tournamentsoftware.com/find/player',\n    timeout: 5000,\n  });\n\n  return client\n    .get(\n      `/DoSearch?Page=1&SportID=2&Query=${encodeURIComponent(\n        query,\n      )}&X-Requested-With=XMLHttpRequest&_=0`,\n    )\n    .then((response: AxiosResponse) => {\n      const data: string = response.data;\n      return data;\n    })\n    .catch((error) => {\n      console.error('Error fetching search results:', error);\n      return [];\n    });\n}\n\nasync function getPlayerDetails(name: string): Promise<PlayerDetails> {\n  const client = axios.create({\n    baseURL: 'https://tournamentsoftware.com/find/player',\n    timeout: 5000,\n  });\n\n  let result: PlayerDetails;\n\n  try {\n    const $ = cheerio.load(await getSearchResults(name));\n    const club = $('small.media__subheading span.nav-link__value')\n      .first()\n      .text()\n      .trim();\n    console.log('Extracted Club:', club);\n\n    const playerName = $('h5.media__title a.media__link span.nav-link__value')\n      .first()\n      .text()\n      .trim();\n\n    console.log('Player Name:', playerName);\n\n    const playerId = $('h5.media__title span.media__title-aside')\n      .first()\n      .text()\n      .replace(/[()]/g, '')\n      .trim();\n\n    console.log('Player ID:', playerId);\n\n    result = { name: playerName, club: club, id: playerId };\n    return result;\n  } catch (error) {\n    console.error('Error in getByName:', error);\n    result = { name: '', club: '', id: '' };\n  }\n\n  return result;\n}\n\nexport default getPlayerDetails;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACA,OAAO,WAIA;AACP,YAAY,aAAa;AAEzB,SAAS,iBAAiB,OAA0C;AAClE,QAAM,SAAS,MAAM,OAAO;AAAA,IAC1B,SAAS;AAAA,IACT,SAAS;AAAA,EACX,CAAC;AAED,SAAO,OACJ;AAAA,IACC,oCAAoC;AAAA,MAClC;AAAA,IACF,CAAC;AAAA,EACH,EACC,KAAK,CAAC,aAA4B;AACjC,UAAM,OAAe,SAAS;AAC9B,WAAO;AAAA,EACT,CAAC,EACA,MAAM,CAAC,UAAU;AAChB,YAAQ,MAAM,kCAAkC,KAAK;AACrD,WAAO,CAAC;AAAA,EACV,CAAC;AACL;AAEA,SAAe,iBAAiB,MAAsC;AAAA;AACpE,UAAM,SAAS,MAAM,OAAO;AAAA,MAC1B,SAAS;AAAA,MACT,SAAS;AAAA,IACX,CAAC;AAED,QAAI;AAEJ,QAAI;AACF,YAAM,IAAY,aAAK,MAAM,iBAAiB,IAAI,CAAC;AACnD,YAAM,OAAO,EAAE,8CAA8C,EAC1D,MAAM,EACN,KAAK,EACL,KAAK;AACR,cAAQ,IAAI,mBAAmB,IAAI;AAEnC,YAAM,aAAa,EAAE,oDAAoD,EACtE,MAAM,EACN,KAAK,EACL,KAAK;AAER,cAAQ,IAAI,gBAAgB,UAAU;AAEtC,YAAM,WAAW,EAAE,yCAAyC,EACzD,MAAM,EACN,KAAK,EACL,QAAQ,SAAS,EAAE,EACnB,KAAK;AAER,cAAQ,IAAI,cAAc,QAAQ;AAElC,eAAS,EAAE,MAAM,YAAY,MAAY,IAAI,SAAS;AACtD,aAAO;AAAA,IACT,SAAS,OAAO;AACd,cAAQ,MAAM,uBAAuB,KAAK;AAC1C,eAAS,EAAE,MAAM,IAAI,MAAM,IAAI,IAAI,GAAG;AAAA,IACxC;AAEA,WAAO;AAAA,EACT;AAAA;AAEA,IAAO,cAAQ;","names":[]}